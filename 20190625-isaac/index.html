<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>Builing a Color Blindness Simulator PWA</title>

        <link rel="stylesheet" href="css/reset.css">
        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/serif.css">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/monokai.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1>hi</h1>
                    <p>I'm Koen Kivits, web developer at <a href="https://jouwweb.nl" nofollow>JouwWeb</a></p>
                </section>
                <section aria-hidden data-background-color="green" style="color: red !important">
                    <h1>hi</h1>
                    <p>I'm Koen Kivits, web developer at <a href="https://jouwweb.nl" nofollow>JouwWeb</a></p>
                </section>
                <section>
                    <h2>what is color blindness?</h2>
                </section>
                <section>
                    <img alt="Normal sight" src="./img/cb0.jpg" style="width: 100%;">
                </section>
                <section>
                    <img alt="Deuteranopia sight" src="./img/cb1.jpg" style="width: 100%;">
                </section>
                <section>
                    <img alt="Tritanopia sight" src="./img/cb2.jpg" style="width: 100%;">
                </section>
                <section>
                    <h2>let's build!</h2>
                </section>
                <section>
                    <p><a href="https://github.com/skratchdot/color-blind">github.com/skratchdot/color-blind</a>
                    <pre class="fragment"><code class="js">blinder.deuteranopia("#42dead"); // --&gt; "#debeb6"
blinder.protanopia('#42dead'); // --&gt; "#d1c4a0"
// ... et cetera
</pre></code>
                </section>
                <section>
                    <h2>hardware acceleration</h2>
                    <p class="fragment">(running stuff on the GPU)</p>
                </section>
                <section>
                    <img src="./img/despicableme0.jpg">
                </section>
                <section>
                    <img src="./img/despicableme.jpg">
                </section>
                <section>
                    <h2>enter WebGL</h2>
                </section>
                <section>
                    <h3>shaders</h3>
                    <p><img class="fragment" src="./img/yoda1.jpg"><img class="fragment" src="./img/yoda2.jpg"></p>
                    <p class="fragment">can also do image processing!</p>
                </section>
                <section>
                    <h2>enter getUserMedia()</h2>
                </section>
                <section>
                    <h3>example: camera</h3>
                    <pre><code data-noescape><span data-fragment-index="1" class="fragment">let constraints = {
    video: { facingMode: "user" }
};</span>

<span data-fragment-index="2" class="fragment">navigator.mediaDevices.getUserMedia(constraints)</span>
<span data-fragment-index="4" class="fragment">    .then(function(stream) {
<span data-fragment-index="5" class="fragment">        let video = document.createElement('video');
        document.body.appendChild(video);
        video.srcObject = stream;

        video.onloadedmetadata = function() {
            video.play();
        }</span>
    });</span></code></pre>
                    <img data-fragment-index="3" class="fragment fade-in-then-out" style="position: absolute; top: 25%; left: 25%;" src="./img/permission.jpg">
                </section>
                <section>
                    <h3>WebGL + <code>&lt;video&gt;</code> = ‚ù§Ô∏è</h3>
                </section>
                <section>
                    <h3>browser support</h3>
                    <p class="fragment">‚úîÔ∏è</p>
                    <ul>
                        <li class="fragment">Samsung Internet: ü§∑</li>
                        <li class="fragment">Firefox for Android: ü§®</li>
                        <li class="fragment">iOS: <span class="fragment">ü§¶</span></li>
                    </ul>
                </section>
                <section>
                    <h2>making it usable</h2>
                    <p class="fragment"><strong>fast</strong> and <strong>offline-first</strong></p>
                    <ul>
                        <li class="fragment"><strong>Preact</strong> for rendering</li>
                        <li class="fragment"><strong>Unistore</strong> for state</li>
                        <li class="fragment"><strong>Workbox</strong> for offline availability</li>
                    </ul>
                </section>
                <section>
                    <h2><a href="https://colorblindsim.com">colorblindsim.com</a></h2>
                    <p>
                        <img style="width: 25%;" src="./img/screenshot1.png">
                        <img style="width: 25%;" src="./img/screenshot2.png">
                        <img style="width: 25%;" src="./img/screenshot3.png">
                    </p>
                </section>
                <section>
                    <p><strong>39 kilobytes</strong> gzipped</p>
                    <p><small>(<strong>24 kilobytes</strong> if you don't count the favicon)</small></p>
                </section>
                <section>
                    <h2>the web is about sharing experiences</h2>
                </section>
                <section>
                    <h2>useful links</h2>
                    <ul>
                        <li><a href="https://www.colorblindsim.com">coloblindsim.com</a></li>
                        <li><a href="https://github.com/koenkivits/colorblindsim">github.com/koenkivits/colorblindsim</a></li>
                        <li><a href="https://webglfundamentals.org/webgl/lessons/webgl-image-processing.html">webglfundamentals.org/webgl/lessons/webgl-image-processing.html</a></li>
                    </ul>
            </div>
        </div>

        <aside style="position: fixed; bottom: 1em; left: 1em; opacity: .8; font-size: 1.2em">
            <p><small>
                <svg style="position: relative; top: .35em; height: 1.4em; width: 1.4em;" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 612" style="enable-background:new 0 0 612 612;" xml:space="preserve">
                    <g>
                        <g>
                                <path style="fill:#010002;" d="M612,116.258c-22.525,9.981-46.694,16.75-72.088,19.772c25.929-15.527,45.777-40.155,55.184-69.411    c-24.322,14.379-51.169,24.82-79.775,30.48c-22.907-24.437-55.49-39.658-91.63-39.658c-69.334,0-125.551,56.217-125.551,125.513    c0,9.828,1.109,19.427,3.251,28.606C197.065,206.32,104.556,156.337,42.641,80.386c-10.823,18.51-16.98,40.078-16.98,63.101    c0,43.559,22.181,81.993,55.835,104.479c-20.575-0.688-39.926-6.348-56.867-15.756v1.568c0,60.806,43.291,111.554,100.693,123.104    c-10.517,2.83-21.607,4.398-33.08,4.398c-8.107,0-15.947-0.803-23.634-2.333c15.985,49.907,62.336,86.199,117.253,87.194    c-42.947,33.654-97.099,53.655-155.916,53.655c-10.134,0-20.116-0.612-29.944-1.721c55.567,35.681,121.536,56.485,192.438,56.485    c230.948,0,357.188-191.291,357.188-357.188l-0.421-16.253C573.872,163.526,595.211,141.422,612,116.258z"/>
                                    </g>
                    </g>
                </svg>
                <a href="https://twitter.com/koenkivits" style="color: inherit; text-decoration: none;">@koenkivits</a>
            </small></p>
        </aside>

        <script src="js/reveal.js"></script>

        <script>
            // More info about config & dependencies:
            // - https://github.com/hakimel/reveal.js#configuration
            // - https://github.com/hakimel/reveal.js#dependencies
            Reveal.initialize({
                transition: 'none',
                hash: true,
                dependencies: [
                    { src: 'plugin/markdown/marked.js' },
                    { src: 'plugin/markdown/markdown.js' },
                    { src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/highlight/highlight.js', async: true }
                ]
            });

            /* this doesn't work because Reveal's state doesn't work as I'd expected: */
            /*
            let prevStates = [];
            Reveal.addEventListener('fragmentshown', function(event) {
                let newState = event.fragment.dataset.state;
                if (newState) {
                    prevStates.push(Reveal.getState());
                    Reveal.setState(newState);
                }
                console.log(Reveal.getState());
            });

            Reveal.addEventListener('fragmenthidden', function(event) {
                let state = event.fragment.dataset.state;
                if (state && prevStates.length > 0) {
                    Reveal.setState(prevStates.pop());
                }
            });*/
        </script>
    </body>
</html>
